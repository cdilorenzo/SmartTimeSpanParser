name: Build and Test SmartTimeSpanParser (.NET Standard 2.0 + .NET 8.0)

on:
  push:
  pull_request:

jobs:
  build_and_test:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ›ï¸ Checkout code
        uses: actions/checkout@v3

      - name: ğŸ§° Setup .NET 8 SDK
        uses: actions/setup-dotnet@v3
        with:
          dotnet-version: 8.0.x

      - name: ğŸ“¦ Restore dependencies
        run: dotnet restore SmartTimeSpanParser/SmartTimeSpanParser.sln

      - name: ğŸ§ª Build library for .NET Standard 2.0
        run: dotnet build src/SmartTimeSpanParser/SmartTimeSpanParser.csproj --framework netstandard2.0 --configuration Release

      - name: ğŸ§¼ Clean test project
        run: dotnet clean tests/SmartTimeSpanParser.Tests/SmartTimeSpanParser.Tests.csproj

      - name: ğŸ› ï¸ Build test project for .NET 8.0
        run: dotnet build tests/SmartTimeSpanParser.Tests/SmartTimeSpanParser.Tests.csproj --configuration Debug

      - name: ğŸš€ Run unit tests
        run: dotnet test tests/SmartTimeSpanParser.Tests/SmartTimeSpanParser.Tests.csproj --verbosity normal
